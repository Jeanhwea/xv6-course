digraph inode_relation {
  rankdir=LR;
  node [shape=record];

  subgraph cluster_inode {
    label =<<b>inode struct</b> (in memory)>; style=filled; color=white;
    inode [label="uint dev|uint inum|int ref|struct sleeplock lock|int valid|<f0>short type|short major|short minor|short nlink|uint size|<f9>uint addrs"];
  }
  inode:f0 -> dinode:f0 [label=copy style=dashed arrowhead=none];
  inode:f9 -> dinode:f9 [label=copy style=dashed arrowhead=none];
  subgraph cluster_dinode {
    label =<<b>dinode struct</b> (on disk)>; style=filled; color=white;
    dinode [label="<f0>short type|short major|short minor|short nlink|uint size|{<f9>uint addrs|<d1>addr1|...|<d2>addr12|<ind>indirect}"];
  }
  subgraph cluster_indirect {
    label =<<b>indirect addrs</b>>; style=filled; color=white;
    indirect [label="<i1>addr1|...|<ix>addrX|...|<i2>addr128"];
  }
  subgraph cluster_data {
    label =<<b>virtual memory</b>>; style=filled; color=lightgray;
    data2  [label="data"];
    data1  [label="data"];
    idata1 [label="data"];
    idataX [label="data"];
    idata2 [label="data"];
  }

  dinode:d1 -> data1;
  dinode:d2 -> data2;
  dinode:ind -> indirect;
  indirect:i1 -> idata1;
  indirect:ix -> idataX;
  indirect:i2 -> idata2;

}
